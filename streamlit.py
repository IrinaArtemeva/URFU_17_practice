import streamlit as st
import pandas as pd
import numpy as np

st.set_page_config(
page_title="–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
page_icon="üßä")

def load_dataframe(file):
    # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –≤ DataFrame
    df = pd.read_csv(file)
    return df
    # –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª–æ–≤—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ —Å –º–µ—Ç–∫–æ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Ñ–∞–π–ª–æ–≤
    uploaded_file = st.file_uploader("–í—ã–±–µ—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏", type="csv")

def create_colored_container(color, header, content):
    st.markdown(
        f"""
        <div style="background-color: {color}; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
            <h2 style="color: black;">{header}</h2>
            <p style="color: black;">{content}</p>
        </div>
        """,
        unsafe_allow_html=True
    )

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
page_element="""
<style>
[data-testid="stAppViewContainer"]{
  background-image: url("https://abrakadabra.fun/uploads/posts/2022-02/1643785322_14-abrakadabra-fun-p-zelenii-fon-sberbanka-16.jpg");
  background-size: cover;
}
[data-testid="baseButton-secondary"]{
background-color: rgb(24 118 42 / 70%);
}
[data-testid="stBaseButton-secondary"]{
background-color: rgb(133 123 12 / 71%);
}
[data-testid="stFileUploaderDropzone"]{
background-color: rgb(255, 255, 255);
}
[data-baseweb="base-input"]{
background-color: rgb(255, 255, 255);
}
[role="tablist"]{
background-color: rgb(24 118 42 / 90%);
border-radius: 10px;
height=100
}
[data-testid="stHeader"]{
  background-color: rgba(0,0,0,0);
}
.st-b1{
  margin: auto;
}
[data-testid="block-container"]
 { background-color: rgba(255, 255, 255, 0.4)
}
.st-cc {
    margin: auto;
}

</style>
"""
st.markdown(page_element, unsafe_allow_html=True)
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
if 'page' not in st.session_state:
    st.session_state.page = 'Main'  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
def go_to_main():
    st.session_state.page = 'Main'

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
def go_to_contact():
    st.session_state.page = 'Contact'

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
def main_page():
    # –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    st.title('–ó–ê–ì–û–õ–û–í–û–ö')


    create_colored_container("#edededb3", '–ß–∞—Å—Ç—å 1. –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤–∏—Ç—Ä–∏–Ω –¥–∞–Ω–Ω—ã—Ö.', "–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –≤–≤–∏–¥—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–≥ –±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–æ–π –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —ç—Ç–∞–ø–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∞–º–æ–º—É –≤—ã–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –í—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –ª–∏–±–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ csv.")
    create_colored_container("#1ea137", "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:", " ")


    # –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞
    col1, col2 = st.columns(2)

    # –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    with col1:
        url_input = st.text_input("–í–≤–µ–¥–∏—Ç–µ URL:", key="url_input_1")
    
        if url_input:
            try:
                webbrowser.open(url_input)
                st.success("–°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∞!")
            except ValueError:
                st.error("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL.")


    # –°–æ–∑–¥–∞–µ–º –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    with col2:
        uploaded_file = st.file_uploader("–í—ã–±–µ—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏", key="uploaded_file_1", type="csv")

        if uploaded_file is not None:
            df = load_dataframe(uploaded_file)  # –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ

    create_colored_container("#1ea137", "–í–∏—Ç—Ä–∏–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", " ")

    # –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞
    col3, col4 = st.columns(2)

    # –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    with col3:
        url_input = st.text_input("–í–≤–µ–¥–∏—Ç–µ URL:", key="url_input_2")
    
        if url_input:
            try:
                webbrowser.open(url_input)
                st.success("–°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∞!")
            except ValueError:
                st.error("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL.")


    # –°–æ–∑–¥–∞–µ–º –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    with col4:
        uploaded_file = st.file_uploader("–í—ã–±–µ—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏", key="uploaded_file_2", type="csv")

        if uploaded_file is not None:
            df = load_dataframe(uploaded_file) 
        


    create_colored_container("#edededb3", "–ß–∞—Å—Ç—å 2. –û—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞.", "–ü–æ—è—Å–Ω–µ–Ω–∏–µ: –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–∞–º —Å–æ–æ–±—â–∏—Ç—å –Ω–∞–º –∞–Ω–∫–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ")  


# –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
    container = st.container()

# –°–æ–∑–¥–∞–µ–º DataFrame —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    data = {
        '–ú–µ—Ç—Ä–∏–∫–∏': ["–í–∞–∂–Ω–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤", 
        "–û—Ü–µ–Ω–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞",
	"–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å",
	"–£—Ä–æ–≤–µ–Ω—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏",
	"–û–ø—ã—Ç –∫–æ–º–∞–Ω–¥—ã",
	"–°—Ä–æ—á–Ω–æ—Å—Ç—å",
	"–ü–ª–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏",
	"–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤",
	"–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π",
	"–†–µ–∞–∫—Ü–∏—è –Ω–∞ –æ—à–∏–±–∫–∏"],
        '–í–µ—Å–∞ –º–µ—Ç—Ä–∏–∫': ['15%', '15%', '13%', '12%', '10%', '10%', '10%', '5%', '5%', '5%']
    }


    df = pd.DataFrame(data)

# –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤
    st.dataframe(df, hide_index=True)
   
    col5, col6, col7, col8, col9 = st.columns(5)

    # –í—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–µ—Ü —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫—É
    with col7: 
        st.button("–û–¶–ï–ù–ò–¢–¨", on_click=go_to_contact)

def contact_page():
    st.title('–†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–¶–ï–ù–ö–ò')
    with st.container():
        create_colored_container("#1ea137", "–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:", " ")
        with st.container():
            create_colored_container("#ffffff", "", "(–≤—ã–≤–æ–¥ –∏–∑ –ø—Ä–∏–Ω—Ç–∞ –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞)") 
    # –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞
    col01, col02 = st.columns(2)

    # –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    with col01:
        create_colored_container("#1ea137", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–∏—Ç—Ä–∏–Ω:", " ")
        create_colored_container("#ffffff", "", "(–≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–≥–æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∫—Ä–∞—Å–∏–≤–æ–º –≥—Ä–∞—Ñ–∏–∫–µ)") 
    with col02:
        create_colored_container("#1ea137", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∞–Ω–∫–µ—Ç—ã –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤:", " ")
        create_colored_container("#ffffff", "", "(—Å–ø–∏—Å–æ–∫ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –∏ –≤—ã–≤–æ–¥ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã)")     
    create_colored_container("#ffffff", "", "(–•–µ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–∏—Ç—Ä–∏–Ω—ã, –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ)")      

    st.button("–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É", on_click=go_to_main)

# –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
if st.session_state.page == 'Main':
    main_page()
else:
    contact_page()
